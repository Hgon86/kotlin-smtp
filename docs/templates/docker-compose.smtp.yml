version: "3.9"

services:
  redis:
    image: redis:7
    restart: unless-stopped
    ports:
      - "6379:6379"

  smtp-app:
    image: your-org/kotlin-smtp-app:latest
    restart: unless-stopped
    environment:
      SMTP_MAILBOX_DIR: /data/mailboxes
      SMTP_TEMP_DIR: /data/temp
      SMTP_LISTS_DIR: /data/lists
      SMTP_SPOOL_DIR: /data/spool
      SPRING_REDIS_HOST: redis
      SPRING_REDIS_PORT: 6379
    ports:
      - "2525:2525"
      - "8081:8081"
    volumes:
      - ./data:/data
    depends_on:
      - redis
